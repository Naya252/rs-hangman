(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();var K={BASE_URL:"https://naya252.github.io/rs-hangman/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const k="HANGMAN GAME",{BASE_URL:L}=K,p="gallows",I=`${p}__title`,z=`${p}__image-container`,A=["gallows","head","body","hand-one","hand-two","leg-one","leg-two","crow","crow3","crow4"],E=[0,7,8,9],O=A.map((i,e)=>({tag:"img",class:`${z}_${i}`,alt:i,src:`${L}/img/${i}.svg`,isDefault:E.includes(e)})),r={section:{tag:"section",class:p},title:{tag:"h1",class:I},imgContainer:{tag:"div",class:z},images:[...O]},h="quiz",x=`${h}__title`,S=`${h}__word`,Q=`${S}_letter`,_=`${h}__hint`,N=`${_}_text`,W=`${_}_counter`,H=`${_}_counter-value`,T=`${h}__keyboard`,w=`${T}_key`,s={section:{tag:"section",class:h},title:{tag:"h1",class:x},word:{tag:"div",class:S},letter:{tag:"div",class:Q},hint:{tag:"div",class:_},text:{tag:"p",class:N},counter:{tag:"p",class:W},counterValue:{tag:"b",class:H}},y=[{id:1,word:{en:"children",ru:"детей"},hint:{en:"Who could be mailed to the US before 1913?",ru:"Кого можно было отправить по почте в США до 1913 года?"}},{id:2,word:{en:"chinese",ru:"китайский"},hint:{en:"This language is the most popular in the world",ru:"Этот язык самый популярный в мире"}},{id:3,word:{en:"antarctica",ru:"антарктида"},hint:{en:"Where the Onyx River flows 60 days a year?",ru:"Где течет река Оникс 60 дней в году?"}},{id:4,word:{en:"jellyfish",ru:"медуза"},hint:{en:"This animal has no brain and no blood vessels",ru:"У этого животного нет мозга и кровеносных сосудов"}},{id:5,word:{en:"cognac",ru:"коньяк"},hint:{en:"Thermometers were filled with this liquid until the 17th century",ru:"Этой жидкостью заполняли термометры до 17 века"}},{id:6,word:{en:"lemon",ru:"лимон"},hint:{en:"This citrus fruit contains more sugar than strawberries",ru:"Этот цитрусовый фрукт содержит больше сахара, чем клубника"}},{id:7,word:{en:"chicken",ru:"курица"},hint:{en:"The longest flight of this bird lasted 13 seconds",ru:"Самый продолжительный полет этой птицы длился 13 секунд"}},{id:8,word:{en:"jupiter",ru:"юпитер"},hint:{en:"It regularly rains diamonds on this planet",ru:"На этой планете регулярно идут дожди из алмазов"}},{id:9,word:{en:"diamond",ru:"алмаз"},hint:{en:"This gem can burn",ru:"Этот драгоценный камень может гореть"}},{id:10,word:{en:"duck",ru:"утка"},hint:{en:"This bird is capable of diving to a depth of 6 meters",ru:"Эта птица способна нырять на глубину до 6 метров"}}],$=[{ru:"Й",en:"Q",code:"KeyQ"},{ru:"Ц",en:"W",code:"KeyW"},{ru:"У",en:"E",code:"KeyE"},{ru:"К",en:"R",code:"KeyR"},{ru:"Е",en:"T",code:"KeyT"},{ru:"Н",en:"Y",code:"KeyY"},{ru:"Г",en:"U",code:"KeyU"},{ru:"Ш",en:"I",code:"KeyI"},{ru:"Щ",en:"O",code:"KeyO"},{ru:"З",en:"P",code:"KeyP"},{ru:"Х",en:null,code:"BracketLeft"},{ru:"Ъ",en:null,code:"BracketRight"},{ru:"Ф",en:"A",code:"KeyA"},{ru:"Ы",en:"S",code:"KeyS"},{ru:"В",en:"D",code:"KeyD"},{ru:"А",en:"F",code:"KeyF"},{ru:"П",en:"G",code:"KeyG"},{ru:"Р",en:"H",code:"KeyH"},{ru:"О",en:"J",code:"KeyJ"},{ru:"Л",en:"K",code:"KeyK"},{ru:"Д",en:"L",code:"KeyL"},{ru:"Ж",en:null,code:"Semicolon"},{ru:"Э",en:null,code:"Quote"},{ru:"Я",en:"Z",code:"KeyZ"},{ru:"Ч",en:"X",code:"KeyX"},{ru:"С",en:"C",code:"KeyC"},{ru:"М",en:"V",code:"KeyV"},{ru:"И",en:"B",code:"KeyB"},{ru:"Т",en:"N",code:"KeyN"},{ru:"Ь",en:"M",code:"KeyM"},{ru:"Б",en:null,code:"Comma"},{ru:"Ю",en:null,code:"Period"},{ru:"Ё",en:null,code:"Backquote"},{ru:"Русский",en:"English",code:"Space"}],D=["KeyA","KeyQ","KeyW","KeyY","KeyZ"],u=[{counterText:{en:"Incorrect gueses ",ru:"Неверное предположение "}},{modal:{answer:{en:"Answer",ru:"Ответ"},win:{en:"Winning!",ru:"Победа!"},loss:{en:"Losing...",ru:"Проигрыш..."},again:{en:"Play again",ru:"Сыграть еще"}}}],P=[{first:0,last:12},{first:12,last:23},{first:23,last:32},{first:32,last:34}];class U{constructor(e=T,t="en",o=null,n=null){this.keyboardTag="div",this.keyboardClass=e,this.keyboard=null,this.keyboardLines=null,this.keyboardKey={tag:"button",class:w},this.overlay={tag:"div",class:`${e}_overlay`},this.lang=t,this.timeStartClickBtn=n,this.max=o,this.alphabet=$}initKeyboard(e){const t=l(this.keyboardTag,this.keyboardClass);this.keyboard=t,this.keyboardLines=[1,2,3,4].map(o=>({tag:"div",class:`${this.keyboardClass}-line${o} line`,index:P[o-1]})),this.keyboardLines.forEach((o,n)=>{const a=l(o.tag,o.class,this.keyboard);this.keyboardLines[n].el=a}),this.overlay.el=l(this.overlay.tag,this.overlay.class,this.keyboard),e.append(this.keyboard)}createKeys(){let e=0;for(;e<this.keyboardLines.length;){const t=this.keyboardLines[e];b(t.el.childNodes),this.alphabet.slice(t.index.first,t.index.last).forEach(n=>{if(n[this.lang]){const a=l(this.keyboardKey.tag,this.keyboardKey.class);a.type="button",a.innerText=n[this.lang],a.value=n[this.lang],a.name=n.code,a.classList.add("btn"),t.el.append(a)}}),e+=1}}checkTimer(e){let t,o;if(e.type==="click"||e.type==="keydown"&&this.alphabet.some(n=>n.code===e.code))if(this.timeStartClickBtn){const n=window.performance.now();if(n-this.timeStartClickBtn>50){this.timeStartClickBtn=n;const a=this.chooseKey(e);t=a.isChangedLanguage,o=a.key}}else{this.timeStartClickBtn=window.performance.now();const n=this.chooseKey(e);t=n.isChangedLanguage,o=n.key}return e.type==="keyup"&&e.code==="Space"&&(t=this.clickOnSpace()),{isChangedLanguage:t,key:o}}clickOnSpace(){const{notDisabled:e}=this.checkSpaceDisabled();return e&&setTimeout(()=>{this.createKeys()},50),e}checkSpaceDisabled(){const e=this.keyboard.lastChild.previousSibling.lastChild;return{notDisabled:!e.hasAttribute("disabled"),spaceKey:e}}chooseKey(e){let t=null,o=null;if(e.type==="click"&&(t=e.target.closest(`.${this.keyboardKey.class}`),t&&(t.hasAttribute("disabled")||t.focus(),t.getAttribute("name")==="Space"&&(o=this.clickOnSpace()))),e.type==="keydown"){let n;D.includes(e.code)?n=this.checkSpecialKey(e):n=this.alphabet.filter(a=>a.code===e.code),n&&(t=document.querySelector(`.${this.keyboardKey.class}[value=${n[0][this.lang]}]`),t.hasAttribute("disabled")||t.focus())}return{isChangedLanguage:o,key:t}}checkSpecialKey(e){let t;const o=e.key.toUpperCase();return this.alphabet.some(n=>n.ru===o||n.en===o)?t=this.alphabet.filter(n=>n.ru===e.key.toUpperCase()||n.en===e.key.toUpperCase()):t=this.alphabet.filter(n=>n.code===e.code),t}cleanKeyboard(){const e=this.keyboard.childNodes;for(const t of e){const o=t.childNodes;for(const n of o)n.removeAttribute("disabled")}this.toggleKeyboardOverly()}toggleKeyboardOverly(){this.overlay.el.classList.toggle("show")}}function B(i){b(s.word.el.childNodes),X(i,s.word.el,s.letter.class,s.letter.tag)}function R(i){b(s.hint.el.childNodes);const e=l(s.text.tag,s.text.class,s.hint.el);e.innerText=i,s.text.el=e;const t=l(s.counter.tag,s.counter.class,s.hint.el);t.innerText=u[0].counterText[c.lang],s.counter.el=t;const o=l(s.counterValue.tag,s.counterValue.class,s.counter.el);s.counterValue.el=o}function G(){const i=l(s.section.tag,s.section.class);s.section.el=i;const e=l(s.title.tag,s.title.class);e.innerText=k,s.title.el=e;const t=l(s.word.tag,s.word.class,i);s.word.el=t;const o=l(s.hint.tag,s.hint.class,i);return s.hint.el=o,s.section.el}function M(){document.querySelector(".container").setAttribute("inert",!0)}function Z(){document.querySelector(".container").removeAttribute("inert")}function V(){document.querySelector("body").classList.remove("scroll-not-visible");const i=document.querySelector(".modal__content");i.classList.remove("content--active"),setTimeout(()=>{i.innerHTML="",document.querySelector(".modal").classList.remove("modal--active"),Z(),setTimeout(()=>{document.querySelector(".modal")&&(document.querySelector(".modal").remove(),c.submitModal())},100)},100)}function Y(i){const e=l("div","modal"),t=l("div","modal__wrap"),o=l("div","modal__content"),n=l("h3","modal__content_title"),a=l("p","modal__content_p");a.innerText=`${u[1].modal.answer[c.lang]}: ${c.word.join("").toUpperCase()}`,i?n.innerText=u[1].modal.win[c.lang]:n.innerText=u[1].modal.loss[c.lang];const d=l("button","modal__content_btn btn");d.innerText=u[1].modal.again[c.lang],o.append(n),o.append(a),o.append(d),t.append(o),e.append(t);const g=document.querySelector("body");g.classList.add("scroll-not-visible"),g.append(e),e.classList.add("modal--active"),d.addEventListener("click",V),setTimeout(()=>{o.classList.add("content--active"),o.style.backgroundImage=`url("${L}/img/crow2.svg")`,o.style.backgroundSize="20%",o.style.backgroundPosition="85% 30%",o.style.backgroundRepeat="no-repeat",M()},100)}class F extends U{constructor(e,t,o){super(),this.id=e,this.word=t,this.hint=o,this.counter=0,this.openedCounter=0,this.max=6,this.passedQuizes=[],this.data=[...y],this.isWinning=null}checkLocalStorage(){const e=localStorage.getItem("lang");e?this.changeLang(e):this.changeLang("en");const t=localStorage.getItem("passed");if(t){const o=JSON.parse(t);o.length&&o.forEach(n=>{this.changePassedQiuz(+n)})}else{const o=localStorage.getItem("quizId");o&&this.changePassedQiuz(+o)}this.changeId()}saveToLocalStorage(){this.passedQuizes.length&&localStorage.setItem("passed",JSON.stringify(this.passedQuizes)),this.id&&localStorage.setItem("quizId",this.id),this.lang&&localStorage.setItem("lang",this.lang)}init(e){this.initKeyboard(e),this.checkLocalStorage(),this.keyboard.addEventListener("click",t=>this.eventKey(t)),document.addEventListener("keydown",t=>this.eventKey(t)),document.addEventListener("keyup",t=>this.eventKey(t))}eventKey(e){if(this.counter<this.max&&this.isWinning===null||this.openedCounter!==this.word.length&&this.isWinning){const{isChangedLanguage:t,key:o}=this.checkTimer(e);t&&this.counter===0&&setTimeout(()=>{this.changeLang(),this.changeWord(),this.changeHint(),this.printCounter()},50),o&&setTimeout(()=>{this.checkQuizLetter(o,o.getAttribute("value"))},50)}}checkQuizLetter(e,t){if(!e.hasAttribute("disabled")&&t!=="English"&&t!=="Русский"){if(this.word.includes(t.toLowerCase())){const a=[];this.word.forEach((d,g)=>{d===t.toLowerCase()&&a.push({value:t,idx:g})}),this.showLetters(a)}else this.changeCounter();e.setAttribute("disabled","");const{notDisabled:o,spaceKey:n}=this.checkSpaceDisabled();o&&n.setAttribute("disabled","")}}changeLang(e=!1){if(e&&e==="ru"||!e&&this.lang==="en"){this.lang="ru",this.createKeys();return}(e&&e==="en"||!e&&this.lang==="ru")&&(this.lang="en",this.createKeys())}changePassedQiuz(e){this.passedQuizes.push(e),this.changeData(e),this.passedQuizes.length===10&&(this.passedQuizes=[],this.changeData(e),this.changePassedQiuz(e))}changeData(e){this.data=this.data.filter(t=>t.id!==e),this.passedQuizes.length===10&&(this.data=[...y])}changeId(){const e=Math.floor(Math.random()*this.data.length);this.id=this.data[e].id,this.changePassedQiuz(this.id),this.changeWord(),this.changeHint(),this.cleanCounter()}getCurrenntQuiz(){return y.filter(t=>t.id===this.id)[0]}changeWord(){this.word=this.getCurrenntQuiz().word[this.lang].split(""),B(this.word),console.log(this.word.join(""))}changeHint(){this.hint=this.getCurrenntQuiz().hint[this.lang],R(this.hint)}changeCounter(){this.counter<7&&(this.counter+=1,this.printCounter(),v(r.images[this.counter],r.imgContainer.el),this.counter===6&&(this.isWinning=!1,this.overGame(this.isWinning)))}showLetters(e){e.forEach(t=>{s.word.el.childNodes[t.idx].innerText=t.value,s.word.el.childNodes[t.idx].classList.add("show")}),this.openedCounter+=e.length,this.openedCounter===this.word.length&&(this.isWinning=!0,this.overGame(this.isWinning))}overGame(e){this.toggleKeyboardOverly(),setTimeout(()=>{Y(e)},500)}printCounter(){s.counterValue.el.innerText=`${this.counter} / ${this.max}`}cleanCounter(){this.counter=0,this.openedCounter=0,this.printCounter()}cleanQuiz(){this.id=0,this.word=null,this.hint=null,this.isWinning=null}submitModal(){this.cleanQuiz(),J(),this.cleanKeyboard(),this.changeId()}}const c=new F;function l(i,e,t){const o=document.createElement(i);return o.className=e,t&&t.append(o),o}function X(i,e,t,o){i.forEach(n=>{let a;t.includes(w)||(a=l(o,t)),t.includes(w)&&n[c.lang]&&(a=l(o,t),a.type="button",a.hasAttribute("type")&&(a.innerText=n[c.lang],a.value=n[c.lang],a.name=n.code)),a&&e.append(a)})}function C(i){const e=document.querySelector("h1");let t=!1;return(!e||e&&!e.classList.contains(i))&&(e&&e.remove(),t=!0),t}function q(i,e){(i>=781&&!e||i>=781&&e<=780)&&C(s.title.class)&&s.section.el.prepend(s.title.el),(i<781&&!e||i<781&&e>=781)&&C(r.title.class)&&r.section.el.prepend(r.title.el)}function b(i){let e=i.length;for(;e>0;)e-=1,i[e].remove()}function v(i,e){const t=l(i.tag,i.class);t.src=i.src,t.alt=i.alt,t.setAttribute("data-is-default",i.isDefault),e.append(t)}function j(){r.images.forEach(i=>{i.isDefault&&v(i,r.imgContainer.el)})}function J(){const i=r.imgContainer.el.childNodes;let e=i.length;for(;e>0;)e-=1,i[e].getAttribute("data-is-default")!=="true"&&i[e].remove()}function ee(){const i=l(r.section.tag,r.section.class);r.section.el=i;const e=l(r.title.tag,r.title.class);e.innerText=k,r.title.el=e;const t=l(r.imgContainer.tag,r.imgContainer.class,i);return r.imgContainer.el=t,j(),r.section.el}const m=document.createElement("div");m.className="container";const te=ee(),ne=G();m.append(te);m.append(ne);document.querySelector(".body").append(m);let f=window.innerWidth;q(f);window.addEventListener("resize",i=>{q(i.target.innerWidth,f),f=i.target.innerWidth});window.addEventListener("beforeunload",i=>c.saveToLocalStorage(i));window.addEventListener("contextmenu",i=>i.preventDefault());c.init(s.section.el);
//# sourceMappingURL=index-SVAmnBnZ.js.map
